<!DOCTYPE HTML>
<html>
<head>
<title>Shared Workers Test Page #2</title>
<script type="text/javascript">
  window.onload = function() {
    console.log("Calling the worker from page 2");
    var worker = new SharedWorker('pi_shared.js');
    worker.port.addEventListener("message", function(e) {  
      var data = e.data;
      var result = document.getElementById("result");
      if (data.PiValue) {
        result.innerHTML += data.PiValue + '<br/>';
      } else if (data.value) {
        console.log('Page 2 received message: '+data.value);  
      }
    }, false);  
    worker.port.start();  
  }
</script>
</head>
<body>
<h1>Shared Workers Test Page #2</h1>
<article>
  <div id="result"></div>
</article>
</body>
</html>